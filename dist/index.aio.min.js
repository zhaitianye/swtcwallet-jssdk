!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(n.swtcwallet={})}(this,function(n){"use strict";function e(n,e,t,r){return new(t||(t=Promise))(function(i,c){function o(n){try{s(r.next(n))}catch(n){c(n)}}function u(n){try{s(r.throw(n))}catch(n){c(n)}}function s(n){n.done?i(n.value):new t(function(e){e(n.value)}).then(o,u)}s((r=r.apply(n,e||[])).next())})}function t(n,e){function t(n){return function(e){return r([n,e])}}function r(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,c&&(o=2&t[0]?c.return:t[0]?c.throw||((o=c.return)&&o.call(c),0):c.next)&&!(o=o.call(c,t[1])).done)return o;switch(c=0,o&&(t=[2&t[0],o.value]),t[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,c=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!(o=o.length>0&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=e.call(n,s)}catch(n){t=[6,n],c=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var i,c,o,u,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u}function r(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,S()];case 1:return[2,n.sent()]}})})}function i(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getAppInfo","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function c(n){return e(this,void 0,void 0,function(){return t(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){O("toast",n,function(n){e(JSON.parse(n))})})];case 1:return[2,e.sent()]}})})}function o(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("invokeQRScanner","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function u(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("back","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function s(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("refresh","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function a(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("close","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function f(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getWalletList","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function l(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("createWallet","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function d(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getCurrentWallet","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function h(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("switchWallet","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function v(n){var r=n.account;return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getAccountBalances",{account:r},function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function w(n){var r=n.account,i=n.currency,c=n.issuer;return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getCurrencyBalances",{account:r,currency:i,issuer:c},function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function p(n){var r=n.account;return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("getAccountInfo",{account:r},function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function m(n){var r=n.from,i=n.to,c=n.value,o=n.currency,u=n.issuer,s=n.secret,a=n.addMemo,f=n.sequence;return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("sign",{from:r,to:i,value:c,currency:o,issuer:u,secret:s,addMemo:a,sequence:f},function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function b(n){var r=n.from,i=n.to,c=n.data,o=n.gasPrice,u=n.value,s=n.currency,a=n.issuer,f=n.memo,l=n.action;return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("sendTransaction",{from:r,to:i,data:c,gasPrice:o,value:u,currency:s,issuer:a,memo:f,action:l},function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}function g(){return e(this,void 0,void 0,function(){return t(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n){O("selectNode","",function(e){n(JSON.parse(e))})})];case 1:return[2,n.sent()]}})})}var y=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,P=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),S=function(n){return void 0===n&&(n=1e3),e(this,void 0,void 0,function(){var e,r,i;return t(this,function(t){switch(t.label){case 0:return P?[2,{success:!1,msg:"IOS系统暂不支持",code:-1}]:P||y?(e=new Promise(function(n){window.WebViewJavascriptBridge&&n(!0),document.addEventListener("WebViewJavascriptBridgeReady",function(){n(!0)},!1)}),r=new Promise(function(e){setTimeout(function(){e(!1)},n)}),[4,new Promise(function(n){Promise.race([e,r]).then(function(e){!0===e?n(!0):(document.removeEventListener("WebViewJavascriptBridgeReady",function(){alert("removeEventListener")},!1),n(!1))})})]):[2,{success:!1,msg:"其他平台暂不支持",code:-1}];case 1:return i=t.sent(),!0===i?[2,{success:!0,msg:"成功",code:0}]:[2,{success:!1,msg:"未连接到SWTC钱包",code:-1}]}})})},O=function(n,e,t){S().then(function(r){if(!r.success)return void t(JSON.stringify(r));window.WebViewJavascriptBridge.callHandler(n,e,t)})};n.isConnected=r,n.getAppInfo=i,n.handleAndroidToast=c,n.invokeQRScanner=o,n.back=u,n.refresh=s,n.close=a,n.getWalletList=f,n.createWallet=l,n.getCurrentWallet=d,n.switchWallet=h,n.getAccountBalances=v,n.getCurrencyBalances=w,n.getAccountInfo=p,n.sign=m,n.sendTransaction=b,n.selectNode=g,Object.defineProperty(n,"__esModule",{value:!0})});
